#:kivy 2.3.0

<BackupHistoryScreen>:
    name: "backup_history_screen"
    canvas.before:
        Color:
            rgba: 0.95, 0.97, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [40, 30, 40, 30]
        spacing: 20

        # Título
        Label:
            text: 'Backup history'
            font_size: 28
            color: 0.2, 0.2, 0.2, 1
            size_hint_y: None
            height: 40
            halign: 'left'
            text_size: self.size
            bold: True

        # Container da tabela
        BoxLayout:
            orientation: 'vertical'
            padding: [20, 20, 20, 20]
            spacing: 10
            
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

            # ScrollView único para cabeçalho e registros
            ScrollView:
                id: records_scroll
                do_scroll_x: True
                do_scroll_y: True
                bar_width: 10
                bar_color: 0.7, 0.7, 0.7, 0.9
                bar_inactive_color: 0.7, 0.7, 0.7, 0.4
                scroll_type: ['bars', 'content']

                BoxLayout:
                    orientation: 'vertical'
                    size_hint: (None, None)
                    width: 1800  # Largura total da tabela
                    height: self.minimum_height
                    spacing: 0

                    # Cabeçalho da tabela
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: 50
                        spacing: 5
                        canvas.before:
                            Color:
                                rgba: 0.95, 0.95, 0.95, 1
                            Rectangle:
                                pos: self.pos
                                size: self.size

                        Label:
                            text: 'ID'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 80
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Ticket'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 100
                            font_size: 13
                            bold: True

                        Label:
                            text: 'User'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 120
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Date'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 140
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Start'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 100
                            font_size: 13
                            bold: True

                        Label:
                            text: 'End'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 100
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Duration'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 120
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Files'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 100
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Size'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 120
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Source'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 220
                            font_size: 13
                            bold: True
                        
                        Label:
                            text: 'Destination'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 220
                            font_size: 13
                            bold: True

                        Label:
                            text: 'Status'
                            color: 0.3, 0.3, 0.3, 1
                            size_hint_x: None
                            width: 120
                            font_size: 13
                            bold: True

                    # Lista de registros
                    BoxLayout:
                        id: backup_records
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: 1

        # Botão finish
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'center'
            size_hint_y: None
            height: 60

            Button:
                text: 'finish'
                size_hint: None, None
                size: 120, 45
                background_normal: ''
                background_color: 0.09, 0.47, 0.95, 1
                color: 1, 1, 1, 1
                font_size: 16
                on_press: root.finish()